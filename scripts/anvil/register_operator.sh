#!/bin/bash

# Change to the directory where this script is located
cd "$(dirname "$0")"

source .env

# Read the sample quote from the test assets
QUOTE="0x0400030081000000aad8dc72034110eed646147573c445e525ab6ec4d3d51c01a6e567995258a416fa4ff729741613c36a78ec886c671aa42ddf427b867fe1fe43d5dd14ec3497a5372f724762f94127df0d3dae9535430129662677ffe0eee3e14b3c854899789f5b185536718557a117d4e58c81b364c223baeb3017b31566414bf37c834c4cf94ed7cd57fac76bce6bf50900730d5080a9b5fc5b54b816675b5ecc8de34935e22cbdec47e9d0fd5fd5073aa21b07c6a2a2f4930bd7f541f6e4ea34ff26b1518ab11dca5c92338008990f67f65bc28bade5e3ca2fd3f3f244041712d97e2e72f0dfb06a9b04ba412787a5f8385c8d03cd9239e8980963ed490d22aaa41ba475615bbd4a3be7826463eb4e34ecb5b87bdf8785d7fc585ff60273be2620af293be60d492ca78425f4a11c28b6ef25c4c83a9fddf49571dd6c18d2f19d7c9db459dc5ecc5a4efec958ddfecc40c15427b6fc2376efb7548886b6ed9deeda537bc1926b6b36d068d5a57bfe43c212b6b264f6121a960ad1d501ada317756ae1f1b3ea30f8de3744ee0fd24083cff2df18738ab28e785d6f9fa3a389d7c835f16f183200f595a0c9820051b9be18b7f7654d1203589bd9dd0b236af5233cf6184eaaeca585ea3ba64237126ffa502fb5ef7fa41560319504da9ddb68085c5979d52b51f0024fb5cf9b615d3125d835152381ccfbe1b325d3b0404406ca1c7aa77f49b71597fd8e41c166029924fe904f2ad923697ff6abdce61c6ed5f6ed07159d5093ca4cd8a9471787156bae7f263b9ee6034dd4be2719ad5c3ab23f3134e3afcd322a96b0b2ee3660d5e70ce785785aab1ffba85d64ba62891bf67dba59908df0e1559c67d9737a7910727fbac0066449c562020000e610e1816232e70835e6afe9f99d688fcdec3b0ad8b5f2fd04846358cac556309553bda5d3627a7a2e136dbf9b5e5d1293f271ecc44ecb7f76d611ac51fbf820b3609d1fd6a266db94e78e2323ba9c1adbd80225d4963860ebe8e00d0977f5b4506bf38afdb4760e0ee99588157b7d3325e93550a0511a41df4ba889590534e90000dc010000ac7162abbeebf227ec7c0abc3eb75df58eb463a0d71a33830b8dcc8d5fe7d77374eb09cb27159eb43ffe17a67c1a0b73c2e29ceeb8b7c436ec9bc2517a027c86082f6b001fda118462277c5ad25659aa9f30139bbdce5c69c687b0b873d0718ebbca4788618c5829cb6621b228105ff2d34b4dcba406aa39fbcb34e521f62d727fe20155e808089d5a567e86687f1b35f11c782ac306d0895af04fc343f87d8245dc70c8af71cd76d0505f441d07a6b50a4a0774665dd419c9659da9d9c29fe146437ddad38df4ab3e6e3e7060c4b58b0d2b86fdce0e0eb20966323c1361a476afa70665bfb3cdab4e5c899970ba8e412c21890da9771be4aa653d4d62e0f3fb0ae35903e6763b1f1a7a0f29fc790ff1e4bdc9fd84b57295f2488099c06b7b6d133c6827bdbc02b802f6dc01694def937a2557f5ced0610062b1dcacef223a3aa3f50b622fb22f35e217b6883b70f39ef1b6081d4ff5f714e86691cd376140018e32f7e1c9f92cfa958bbf68a5dfa66efd5dae5036f3d6dfe66c0fd8a4a30984b089b339316dd1f3c4d4751cde69753df099fc96f258ea7dc5e113fdeeaeff8d5e16d9100d45d0a1f197bdf0cfc047b5a7d2b1ae450a4fe76e49f26f837613840a0000000000000000000000c51f0a00000000000000000000000000"

# Register as operator with 0.1 ETH registration fee
cast send $OPERATOR_REGISTRY \
  "registerOperator(bytes)" \
  "$QUOTE" \
  --rpc-url $RPC_URL \
  --private-key $OPERATOR_PRIVATE_KEY \
  --value 0.001ether \
  --legacy
